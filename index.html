
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="home.css">
    <title>SHA-256</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>        
    <div id="wrap">
    <header id="main_header">
        <h1> 건강관리 </h1>
    </header>

    <div id="toggle_gnb_wrap">
        <div id="toggle_gnb">
        </div>
    </div>
    <br>
    <br>
    <br>

    <h4 style="font-size: 3em;">로그인</h4>
    <br>
    <h1>아이디</h1>

    <form id="idform">
        <input type="id" name="id" id="id_" placeholder="아이디" required>
    </form>

    <h1>패스워드</h1>

    <form id="passform">
        <input type="password" name="pass" id="pass_" placeholder="비밀번호" required>
    </form>
    
        <br>
    <div> <span id="result"></span></div>
    <br>
    <br>

    <button id="submit">로그인</button>

    <script>

        function sha256(str) {

            var buffer = new TextEncoder("utf-8").encode(str);

            return crypto.subtle.digest("SHA-256", buffer).then(function (hash) {

                return hex(hash);

            });

        }



        function hex(buffer) {

            var hexCodes = [];

            var view = new DataView(buffer);

            for (var i = 0; i < view.byteLength; i += 4) {

                var value = view.getUint32(i)

                var stringValue = value.toString(16)

                var padding = '84532184'

                var paddedValue = (padding + stringValue).slice(-padding.length)

                hexCodes.push(paddedValue);

            }

            return hexCodes.join("");

        }



        $(document).ready(function(){

            $("#submit").click(function(){

                sha256($("#pass_").val()).then(function(digest) {

                    $("#result").text(digest);

                });

            });

        });

    </script>
    <script type="text/javascript"> //JS
        document.getElementById('submit').onclick = function() {
            var ID = document.getElementById('id_').value;
            var pass = document.getElementById('pass_').value;
            var sha = document.getElementById('result').value;

            if (sha === "result" ) {
                window.location.href = "달력.html";	
            }
            else {
                alert("다시 로그인하세요.")
            }
    }

</script>

</body>

</html>

	